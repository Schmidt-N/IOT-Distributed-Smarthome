--- install mosquitto

--- don't know if needed
(sudo apt-add-repository ppa:mosquitto-dev/mosquitto-ppa
sudo apt-get update)

sudo apt install mosquitto mosquitto-clients


sudo ufw allow 1883/tcp

--- commands for mosquitto service
sudo systemctl status mosquitto
sudo systemctl restart mosquitto

----working directory:
cd /etc/mosquitto

sudo chmod +w mosquitto.conf

sudo chown mosquitto: /etc/mosquitto/passwd

sudo chown mosquitto: /etc/mosquitto/acl

-- if exists
sudo mosquitto_passwd /etc/mosquitto/passwd your_username
-- if not exists
sudo mosquitto_passwd -c /etc/mosquitto/passwd your_username

sudo vim mosquitto.conf       ---- or different text editor
---------
password_file /etc/mosquitto/passwd
acl_file /etc/mosquitto/acl
bind_address 0.0.0.0
---------

sudo vim acl                  ---- or different text editor
--------
user user
topic readwrite test/topic
--------

mosquitto_sub -h localhost -t test/topic -u user -P password

mosquitto_pub -h localhost -t test/topic -m "Hello, MQTT" -u user -P password